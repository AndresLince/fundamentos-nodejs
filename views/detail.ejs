<%- include('template/header', { pageTitle: 'Detalle de mascota' }) %>

    <body>
        <div class="container">
            <h1>
                <%= titulo %>
            </h1>
            <% if (error) { %>
                <p><%= errorMessage %></p>
            <% } %>
            <% if (!error) { %>
                <table class="table table-dark">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Descripcion</th>
                            <th scope="col">Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">
                                <%= pet.id %>
                            </th>
                            <td>
                                <%= pet.name %>
                            </td>
                            <td>
                                <%= pet.description %>
                            </td>
                            <td>
                                <a class="btn btn-danger" id="btnDelete" data-id="<%= pet.id %>">
                                    Eliminar
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <% } %>
            <a class="btn btn-success btn-block my-2" href="/pets">
                Volver a mascotas
            </a>

        </div>

        <%- include('template/footer') %>

        <script>
            const deleteButton = document.getElementById('btnDelete');
            deleteButton.addEventListener('click', async() => {
                const id = deleteButton.dataset.id;

                try {
                    const data = await fetch(`/pets/${id}`, {
                        method: 'delete'
                    });
                    const response = await data.json();
                    if (response.status == 200) {
                        location.href = '/pets';
                    } else {
                        console.log(response);
                    }
                } catch (error) {
                    console.log(error);
                }
            });
        </script>